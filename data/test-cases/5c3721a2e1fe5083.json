{"uid":"5c3721a2e1fe5083","name":"test_change_user_status_negative","fullName":"tests.api.chat.test_change_status_user#test_change_user_status_negative","historyId":"09cedd1bde6ce823ea90de04e5891964","time":{"start":1765013945137,"stop":1765013945192,"duration":55},"status":"failed","statusMessage":"AssertionError: Unexpected code: 500, Body: \n  <!doctype html>\n  <html lang=\"en\">\n  <head>\n    <title>Server Error (500)</title>\n  </head>\n  <body>\n    <h1>Server Error (500)</h1><p></p>\n  </body>\n  </html>\n  \nassert 500 == 400\n +  where 500 = <Response [500]>.status_code","statusTrace":"base_url = 'http://185.100.55.56:8009'\nauth_token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzk2NTQ5OTA0LCJpYXQiOjE3NjUwMTM5MDQsImp0aSI6IjViNTM2YzMzMzA5NjRkZWM4ODlmZmFjMWEyMjgyMjcyIiwidXNlcl9pZCI6NzQyNTF9.46VplPXkxGZ5O2rbpVipGSH4zd2qqkdFxggYzauGNR8'\n\n    @allure.epic(\"Chat\")\n    @allure.feature(\"Change User Status\")\n    @allure.story(\"Negative - Change user status with invalid data\")\n    def test_change_user_status_negative(base_url, auth_token):\n        url = f\"{base_url}/chat/change-user-status\"\n        headers = {\n            \"accept\": \"application/json\",\n            \"Authorization\": f\"Bearer {auth_token}\",\n            \"Content-Type\": \"application/json\",\n            \"X-CSRFToken\": \"Hxok4cyWiCE18is0mRY9ytywFXTrCjITXo0sewCvw2wszlEub5AzAg3AhKDmwLD4\"\n        }\n        payload = {\n            \"user_id\": \"invalid_id\",  # wrong type\n            \"status\": \"not_bool\"      # wrong type\n        }\n    \n        with allure.step(\"Send POST request with invalid payload\"):\n            response = requests.post(url, headers=headers, json=payload)\n    \n        with allure.step(\"Expect 400 Bad Request\"):\n>           assert response.status_code == 400, f\"Unexpected code: {response.status_code}, Body: {response.text}\"\nE           AssertionError: Unexpected code: 500, Body: \nE             <!doctype html>\nE             <html lang=\"en\">\nE             <head>\nE               <title>Server Error (500)</title>\nE             </head>\nE             <body>\nE               <h1>Server Error (500)</h1><p></p>\nE             </body>\nE             </html>\nE             \nE           assert 500 == 400\nE            +  where 500 = <Response [500]>.status_code\n\ntests\\api\\chat\\test_change_status_user.py:58: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"clear_allure_results","time":{"start":1765013906140,"stop":1765013906141,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false},{"name":"base_url","time":{"start":1765013906142,"stop":1765013906142,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false},{"name":"headers","time":{"start":1765013906142,"stop":1765013906142,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false},{"name":"auth_token","time":{"start":1765013906143,"stop":1765013906208,"duration":65},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Unexpected code: 500, Body: \n  <!doctype html>\n  <html lang=\"en\">\n  <head>\n    <title>Server Error (500)</title>\n  </head>\n  <body>\n    <h1>Server Error (500)</h1><p></p>\n  </body>\n  </html>\n  \nassert 500 == 400\n +  where 500 = <Response [500]>.status_code","statusTrace":"base_url = 'http://185.100.55.56:8009'\nauth_token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNzk2NTQ5OTA0LCJpYXQiOjE3NjUwMTM5MDQsImp0aSI6IjViNTM2YzMzMzA5NjRkZWM4ODlmZmFjMWEyMjgyMjcyIiwidXNlcl9pZCI6NzQyNTF9.46VplPXkxGZ5O2rbpVipGSH4zd2qqkdFxggYzauGNR8'\n\n    @allure.epic(\"Chat\")\n    @allure.feature(\"Change User Status\")\n    @allure.story(\"Negative - Change user status with invalid data\")\n    def test_change_user_status_negative(base_url, auth_token):\n        url = f\"{base_url}/chat/change-user-status\"\n        headers = {\n            \"accept\": \"application/json\",\n            \"Authorization\": f\"Bearer {auth_token}\",\n            \"Content-Type\": \"application/json\",\n            \"X-CSRFToken\": \"Hxok4cyWiCE18is0mRY9ytywFXTrCjITXo0sewCvw2wszlEub5AzAg3AhKDmwLD4\"\n        }\n        payload = {\n            \"user_id\": \"invalid_id\",  # wrong type\n            \"status\": \"not_bool\"      # wrong type\n        }\n    \n        with allure.step(\"Send POST request with invalid payload\"):\n            response = requests.post(url, headers=headers, json=payload)\n    \n        with allure.step(\"Expect 400 Bad Request\"):\n>           assert response.status_code == 400, f\"Unexpected code: {response.status_code}, Body: {response.text}\"\nE           AssertionError: Unexpected code: 500, Body: \nE             <!doctype html>\nE             <html lang=\"en\">\nE             <head>\nE               <title>Server Error (500)</title>\nE             </head>\nE             <body>\nE               <h1>Server Error (500)</h1><p></p>\nE             </body>\nE             </html>\nE             \nE           assert 500 == 400\nE            +  where 500 = <Response [500]>.status_code\n\ntests\\api\\chat\\test_change_status_user.py:58: AssertionError","steps":[{"name":"Send POST request with invalid payload","time":{"start":1765013945137,"stop":1765013945189,"duration":52},"status":"passed","steps":[],"attachments":[],"parameters":[],"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false,"stepsCount":0,"attachmentStep":false},{"name":"Expect 400 Bad Request","time":{"start":1765013945189,"stop":1765013945190,"duration":1},"status":"failed","statusMessage":"AssertionError: Unexpected code: 500, Body: \n  <!doctype html>\n  <html lang=\"en\">\n  <head>\n    <title>Server Error (500)</title>\n  </head>\n  <body>\n    <h1>Server Error (500)</h1><p></p>\n  </body>\n  </html>\n  \nassert 500 == 400\n +  where 500 = <Response [500]>.status_code\n","statusTrace":"  File \"C:\\Users\\User\\PyCharmMiscProject\\tests\\api\\chat\\test_change_status_user.py\", line 58, in test_change_user_status_negative\n    assert response.status_code == 400, f\"Unexpected code: {response.status_code}, Body: {response.text}\"\n","steps":[],"attachments":[],"parameters":[],"hasContent":true,"attachmentsCount":0,"shouldDisplayMessage":true,"stepsCount":0,"attachmentStep":false}],"attachments":[],"parameters":[],"hasContent":true,"attachmentsCount":0,"shouldDisplayMessage":true,"stepsCount":2,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Chat"},{"name":"story","value":"Negative - Change user status with invalid data"},{"name":"feature","value":"Change User Status"},{"name":"parentSuite","value":"tests.api.chat"},{"name":"suite","value":"test_change_status_user"},{"name":"host","value":"WIN-AVFLEP7C716"},{"name":"thread","value":"2808-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.chat.test_change_status_user"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"5c3721a2e1fe5083.json","parameterValues":[]}