{"uid":"addf2b9511d0501c","name":"test_car_upload_and_activate","fullName":"tests.api.mainfunctions.test_car_uploaddd.TestCarUpload#test_car_upload_and_activate","historyId":"426db27671bee2d3eec360ab3da39416","time":{"start":1771564435952,"stop":1771564436024,"duration":72},"status":"failed","statusMessage":"AssertionError: Upload failed: \n  <!doctype html>\n  <html lang=\"en\">\n  <head>\n    <title>Not Found</title>\n  </head>\n  <body>\n    <h1>Not Found</h1><p>The requested resource was not found on this server.</p>\n  </body>\n  </html>\n  \nassert 404 == 200\n +  where 404 = <Response [404]>.status_code","statusTrace":"self = <tests.api.mainfunctions.test_car_uploaddd.TestCarUpload object at 0x109b64f50>\napi = <api.api_facade.ApiFacade object at 0x109f1a910>\nadmin_api = <api.api_facade.ApiFacade object at 0x109b5ab50>\n\n    @allure.story(\"Positive - User uploads car → Moderator activates\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test_car_upload_and_activate(self, api: ApiFacade, admin_api: ApiFacade):\n        # Step 1: User authenticates and uploads car\n        with allure.step(\"User authenticates\"):\n            resp_auth = api.auth.verify_code(phone=\"+998888672005\", code=\"123456\")\n            assert resp_auth.status_code == 200, f\"Auth failed: {resp_auth.text}\"\n            token = resp_auth.json().get(\"access\") or resp_auth.json().get(\"token\")\n            api.set_bearer_token(token)\n    \n        with allure.step(\"User uploads a new car\"):\n            payload = {\n                \"core_car\": {\n                    \"services\": [],\n                    \"modification\": 17580,\n                    \"drive_unit\": 1,\n                    \"media_tools\": [],\n                    \"optics\": [],\n                    \"external_body_kit\": [],\n                    \"salon\": [4, 2, 3, 5],\n                    \"used_car\": True,\n                    \"brand\": 82,\n                    \"car_model\": 828,\n                    \"generation\": 1651,\n                    \"configuration\": 2391,\n                    \"body_type\": 1,\n                    \"fuel_type\": 7,\n                    \"transmission\": 1,\n                    \"color\": 2,\n                    \"year\": 2022,\n                    \"mileage\": 20000.0\n                },\n                \"region\": 2,\n                \"price\": 10000.0,\n                \"currency\": \"usd\",\n                \"photos\": [\n                    {\n                        \"url\": \"https://files-api.itpoint.uz/orient-motors/images/original/e09fb4fc-2e2d-4dd5-86bd-f1856ff4ed95.webp\",\n                        \"thumbnail\": \"https://files-api.itpoint.uz/orient-motors/images/thumbnail/e09fb4fc-2e2d-4dd5-86bd-f1856ff4ed95_thumb.webp\",\n                        \"type\": \"general\"\n                    },\n                    {\n                        \"url\": \"https://files-api.itpoint.uz/orient-motors/images/original/26c071d4-b5b7-4632-8eb9-3d99cf456244.webp\",\n                        \"thumbnail\": \"https://files-api.itpoint.uz/orient-motors/images/thumbnail/26c071d4-b5b7-4632-8eb9-3d99cf456244_thumb.jpg\",\n                        \"type\": \"general\"\n                    }\n                ],\n                \"changed_part\": [],\n                \"condition\": \"excellent\",\n                \"barter\": False,\n                \"is_cheaper\": False,\n                \"passed_customs_clearance\": False\n            }\n    \n            response = api.car.create_car_v2(payload)\n>           assert response.status_code == 200, f\"Upload failed: {response.text}\"\nE           AssertionError: Upload failed: \nE             <!doctype html>\nE             <html lang=\"en\">\nE             <head>\nE               <title>Not Found</title>\nE             </head>\nE             <body>\nE               <h1>Not Found</h1><p>The requested resource was not found on this server.</p>\nE             </body>\nE             </html>\nE             \nE           assert 404 == 200\nE            +  where 404 = <Response [404]>.status_code\n\ntests/api/mainfunctions/test_car_uploaddd.py:66: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"admin_api","time":{"start":1771564401997,"stop":1771564402452,"duration":455},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api","time":{"start":1771564435950,"stop":1771564435951,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Upload failed: \n  <!doctype html>\n  <html lang=\"en\">\n  <head>\n    <title>Not Found</title>\n  </head>\n  <body>\n    <h1>Not Found</h1><p>The requested resource was not found on this server.</p>\n  </body>\n  </html>\n  \nassert 404 == 200\n +  where 404 = <Response [404]>.status_code","statusTrace":"self = <tests.api.mainfunctions.test_car_uploaddd.TestCarUpload object at 0x109b64f50>\napi = <api.api_facade.ApiFacade object at 0x109f1a910>\nadmin_api = <api.api_facade.ApiFacade object at 0x109b5ab50>\n\n    @allure.story(\"Positive - User uploads car → Moderator activates\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    def test_car_upload_and_activate(self, api: ApiFacade, admin_api: ApiFacade):\n        # Step 1: User authenticates and uploads car\n        with allure.step(\"User authenticates\"):\n            resp_auth = api.auth.verify_code(phone=\"+998888672005\", code=\"123456\")\n            assert resp_auth.status_code == 200, f\"Auth failed: {resp_auth.text}\"\n            token = resp_auth.json().get(\"access\") or resp_auth.json().get(\"token\")\n            api.set_bearer_token(token)\n    \n        with allure.step(\"User uploads a new car\"):\n            payload = {\n                \"core_car\": {\n                    \"services\": [],\n                    \"modification\": 17580,\n                    \"drive_unit\": 1,\n                    \"media_tools\": [],\n                    \"optics\": [],\n                    \"external_body_kit\": [],\n                    \"salon\": [4, 2, 3, 5],\n                    \"used_car\": True,\n                    \"brand\": 82,\n                    \"car_model\": 828,\n                    \"generation\": 1651,\n                    \"configuration\": 2391,\n                    \"body_type\": 1,\n                    \"fuel_type\": 7,\n                    \"transmission\": 1,\n                    \"color\": 2,\n                    \"year\": 2022,\n                    \"mileage\": 20000.0\n                },\n                \"region\": 2,\n                \"price\": 10000.0,\n                \"currency\": \"usd\",\n                \"photos\": [\n                    {\n                        \"url\": \"https://files-api.itpoint.uz/orient-motors/images/original/e09fb4fc-2e2d-4dd5-86bd-f1856ff4ed95.webp\",\n                        \"thumbnail\": \"https://files-api.itpoint.uz/orient-motors/images/thumbnail/e09fb4fc-2e2d-4dd5-86bd-f1856ff4ed95_thumb.webp\",\n                        \"type\": \"general\"\n                    },\n                    {\n                        \"url\": \"https://files-api.itpoint.uz/orient-motors/images/original/26c071d4-b5b7-4632-8eb9-3d99cf456244.webp\",\n                        \"thumbnail\": \"https://files-api.itpoint.uz/orient-motors/images/thumbnail/26c071d4-b5b7-4632-8eb9-3d99cf456244_thumb.jpg\",\n                        \"type\": \"general\"\n                    }\n                ],\n                \"changed_part\": [],\n                \"condition\": \"excellent\",\n                \"barter\": False,\n                \"is_cheaper\": False,\n                \"passed_customs_clearance\": False\n            }\n    \n            response = api.car.create_car_v2(payload)\n>           assert response.status_code == 200, f\"Upload failed: {response.text}\"\nE           AssertionError: Upload failed: \nE             <!doctype html>\nE             <html lang=\"en\">\nE             <head>\nE               <title>Not Found</title>\nE             </head>\nE             <body>\nE               <h1>Not Found</h1><p>The requested resource was not found on this server.</p>\nE             </body>\nE             </html>\nE             \nE           assert 404 == 200\nE            +  where 404 = <Response [404]>.status_code\n\ntests/api/mainfunctions/test_car_uploaddd.py:66: AssertionError","steps":[{"name":"User authenticates","time":{"start":1771564435952,"stop":1771564436006,"duration":54},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"User uploads a new car","time":{"start":1771564436006,"stop":1771564436023,"duration":17},"status":"failed","statusMessage":"AssertionError: Upload failed: \n  <!doctype html>\n  <html lang=\"en\">\n  <head>\n    <title>Not Found</title>\n  </head>\n  <body>\n    <h1>Not Found</h1><p>The requested resource was not found on this server.</p>\n  </body>\n  </html>\n  \nassert 404 == 200\n +  where 404 = <Response [404]>.status_code\n","statusTrace":"  File \"/Users/user/Downloads/abozor-api-tests/tests/api/mainfunctions/test_car_uploaddd.py\", line 66, in test_car_upload_and_activate\n    assert response.status_code == 200, f\"Upload failed: {response.text}\"\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"critical"},{"name":"epic","value":"Main Functions"},{"name":"story","value":"Positive - User uploads car → Moderator activates"},{"name":"feature","value":"Car Upload & Moderation"},{"name":"parentSuite","value":"tests.api.mainfunctions"},{"name":"suite","value":"test_car_uploaddd"},{"name":"subSuite","value":"TestCarUpload"},{"name":"host","value":"Mac"},{"name":"thread","value":"4679-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.mainfunctions.test_car_uploaddd"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"addf2b9511d0501c.json","parameterValues":[]}