{"uid":"2ae4669f574e6406","name":"test_get_auction_deal_negative[?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20]","fullName":"tests.api.auctionn.test_deal_auction#test_get_auction_deal_negative","historyId":"d05bf704ebef033f6210e715c8ea3c36","time":{"start":1766131166823,"stop":1766131166845,"duration":22},"status":"failed","statusMessage":"AssertionError: assert 422 == 500\n +  where 422 = <Response [422]>.status_code","statusTrace":"dev_url = 'http://185.100.55.56:8011'\nauth_headers = {'Accept': 'application/json', 'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZ...zODQyMjMwNWQ4IiwidXNlcl9pZCI6NzQyNTF9.p2I9QTFqzN4tRKAp9olPjwaQKhPo_13zzxwPW4c8PLA', 'Content-Type': 'application/json'}\nquery = '?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20'\n\n    @allure.epic(\"Auction\")\n    @allure.feature(\"Deal\")\n    @allure.story(\"Negative - Invalid query parameters\")\n    @pytest.mark.parametrize(\"query\", [\n        \"?is_sold=true&mark=-1&model=828&generation=1651&page=1&page_size=20\",    # invalid mark\n        \"?is_sold=true&mark=82&model=invalid&generation=1651&page=1&page_size=20\",  # invalid model\n        \"?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20\",     # invalid generation\n        \"?is_sold=true&mark=82&model=828&generation=1651&page=1&page_size=0\",     # page_size = 0\n        \"?is_sold=maybe&mark=82&model=828&generation=1651&page=1&page_size=20\",   # invalid boolean\n        \"?mark=82&model=828&generation=1651&page=1&page_size=20\",                 # missing is_sold\n    ])\n    def test_get_auction_deal_negative(dev_url, auth_headers, query):\n        url = f\"{dev_url}/api/auction/deal{query}\"\n    \n        with allure.step(f\"Send GET request with invalid query: {query}\"):\n            response = requests.get(url, headers=auth_headers)\n    \n        with allure.step(\"Expect 4xx client error or empty 200 response\"):\n>           assert response.status_code == 500\nE           assert 422 == 500\nE            +  where 422 = <Response [422]>.status_code\n\ntests\\api\\auctionn\\test_deal_auction.py:75: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"clear_allure_results","time":{"start":1766131156632,"stop":1766131156633,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"base_url","time":{"start":1766131156633,"stop":1766131156633,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"headers","time":{"start":1766131156634,"stop":1766131156634,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"auth_token","time":{"start":1766131156634,"stop":1766131156686,"duration":52},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"auth_headers","time":{"start":1766131157916,"stop":1766131157916,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"dev_url","time":{"start":1766131161654,"stop":1766131161654,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: assert 422 == 500\n +  where 422 = <Response [422]>.status_code","statusTrace":"dev_url = 'http://185.100.55.56:8011'\nauth_headers = {'Accept': 'application/json', 'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZ...zODQyMjMwNWQ4IiwidXNlcl9pZCI6NzQyNTF9.p2I9QTFqzN4tRKAp9olPjwaQKhPo_13zzxwPW4c8PLA', 'Content-Type': 'application/json'}\nquery = '?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20'\n\n    @allure.epic(\"Auction\")\n    @allure.feature(\"Deal\")\n    @allure.story(\"Negative - Invalid query parameters\")\n    @pytest.mark.parametrize(\"query\", [\n        \"?is_sold=true&mark=-1&model=828&generation=1651&page=1&page_size=20\",    # invalid mark\n        \"?is_sold=true&mark=82&model=invalid&generation=1651&page=1&page_size=20\",  # invalid model\n        \"?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20\",     # invalid generation\n        \"?is_sold=true&mark=82&model=828&generation=1651&page=1&page_size=0\",     # page_size = 0\n        \"?is_sold=maybe&mark=82&model=828&generation=1651&page=1&page_size=20\",   # invalid boolean\n        \"?mark=82&model=828&generation=1651&page=1&page_size=20\",                 # missing is_sold\n    ])\n    def test_get_auction_deal_negative(dev_url, auth_headers, query):\n        url = f\"{dev_url}/api/auction/deal{query}\"\n    \n        with allure.step(f\"Send GET request with invalid query: {query}\"):\n            response = requests.get(url, headers=auth_headers)\n    \n        with allure.step(\"Expect 4xx client error or empty 200 response\"):\n>           assert response.status_code == 500\nE           assert 422 == 500\nE            +  where 422 = <Response [422]>.status_code\n\ntests\\api\\auctionn\\test_deal_auction.py:75: AssertionError","steps":[{"name":"Send GET request with invalid query: ?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20","time":{"start":1766131166823,"stop":1766131166842,"duration":19},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false},{"name":"Expect 4xx client error or empty 200 response","time":{"start":1766131166842,"stop":1766131166843,"duration":1},"status":"failed","statusMessage":"AssertionError: assert 422 == 500\n +  where 422 = <Response [422]>.status_code\n","statusTrace":"  File \"C:\\Users\\User\\PyCharmMiscProject\\tests\\api\\auctionn\\test_deal_auction.py\", line 75, in test_get_auction_deal_negative\n    assert response.status_code == 500\n","steps":[],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":0,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true}],"attachments":[],"parameters":[],"attachmentStep":false,"stepsCount":2,"attachmentsCount":0,"shouldDisplayMessage":true,"hasContent":true},"afterStages":[],"labels":[{"name":"feature","value":"Deal"},{"name":"story","value":"Negative - Invalid query parameters"},{"name":"epic","value":"Auction"},{"name":"parentSuite","value":"tests.api.auctionn"},{"name":"suite","value":"test_deal_auction"},{"name":"host","value":"WIN-AVFLEP7C716"},{"name":"thread","value":"19444-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.auctionn.test_deal_auction"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"query","value":"'?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"2ae4669f574e6406.json","parameterValues":["'?is_sold=true&mark=82&model=828&generation=abc&page=1&page_size=20'"]}