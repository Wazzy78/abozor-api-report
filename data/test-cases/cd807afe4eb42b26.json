{"uid":"cd807afe4eb42b26","name":"test_get_carwash_payment_history","fullName":"tests.api.carwash.test_payment_history.TestPaymentHistory#test_get_carwash_payment_history","historyId":"c876264fec9c1efdfdf9b35ef3918401","time":{"start":1771564429981,"stop":1771564430071,"duration":90},"status":"failed","statusMessage":"AssertionError: Field 'amount' missing in result\nassert 'amount' in {'car_plate_number': '10G995YY', 'carwash_center': {'address_ru': 'Ташкент, Мирабадский р-н, Северный вокзал, Малая ко...s_store_id': '2090', 'close_time': '23:00:09', ...}, 'created_at': '2025-12-10T09:56:28.314145+05:00', 'id': 1323, ...}","statusTrace":"self = <tests.api.carwash.test_payment_history.TestPaymentHistory object at 0x109acc810>\nauthenticated_api = <api.api_facade.ApiFacade object at 0x109c3f550>\n\n    @allure.story(\"Positive - Get carwash payment history\")\n    @allure.severity(allure.severity_level.NORMAL)\n    def test_get_carwash_payment_history(self, authenticated_api: ApiFacade):\n        with allure.step(\"GET /payment/history?type=carwash\"):\n            response = authenticated_api._client.get(\n                \"/payment/history\", params={\"type\": \"carwash\", \"page\": 1, \"page_size\": 20}\n            )\n        with allure.step(\"Verify status 200\"):\n            assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\n        with allure.step(\"Validate pagination structure\"):\n            data = response.json()\n            for field in [\"count\", \"next\", \"previous\", \"results\"]:\n                assert field in data, f\"Field '{field}' missing\"\n            assert isinstance(data[\"results\"], list)\n        with allure.step(\"Validate result items if not empty\"):\n            if data[\"results\"]:\n                for item in data[\"results\"]:\n                    for field in [\"id\", \"amount\", \"status\", \"created_at\"]:\n>                       assert field in item, f\"Field '{field}' missing in result\"\nE                       AssertionError: Field 'amount' missing in result\nE                       assert 'amount' in {'car_plate_number': '10G995YY', 'carwash_center': {'address_ru': 'Ташкент, Мирабадский р-н, Северный вокзал, Малая ко...s_store_id': '2090', 'close_time': '23:00:09', ...}, 'created_at': '2025-12-10T09:56:28.314145+05:00', 'id': 1323, ...}\n\ntests/api/carwash/test_payment_history.py:28: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"authenticated_api","time":{"start":1771564401436,"stop":1771564401504,"duration":68},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"status":"failed","statusMessage":"AssertionError: Field 'amount' missing in result\nassert 'amount' in {'car_plate_number': '10G995YY', 'carwash_center': {'address_ru': 'Ташкент, Мирабадский р-н, Северный вокзал, Малая ко...s_store_id': '2090', 'close_time': '23:00:09', ...}, 'created_at': '2025-12-10T09:56:28.314145+05:00', 'id': 1323, ...}","statusTrace":"self = <tests.api.carwash.test_payment_history.TestPaymentHistory object at 0x109acc810>\nauthenticated_api = <api.api_facade.ApiFacade object at 0x109c3f550>\n\n    @allure.story(\"Positive - Get carwash payment history\")\n    @allure.severity(allure.severity_level.NORMAL)\n    def test_get_carwash_payment_history(self, authenticated_api: ApiFacade):\n        with allure.step(\"GET /payment/history?type=carwash\"):\n            response = authenticated_api._client.get(\n                \"/payment/history\", params={\"type\": \"carwash\", \"page\": 1, \"page_size\": 20}\n            )\n        with allure.step(\"Verify status 200\"):\n            assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\n        with allure.step(\"Validate pagination structure\"):\n            data = response.json()\n            for field in [\"count\", \"next\", \"previous\", \"results\"]:\n                assert field in data, f\"Field '{field}' missing\"\n            assert isinstance(data[\"results\"], list)\n        with allure.step(\"Validate result items if not empty\"):\n            if data[\"results\"]:\n                for item in data[\"results\"]:\n                    for field in [\"id\", \"amount\", \"status\", \"created_at\"]:\n>                       assert field in item, f\"Field '{field}' missing in result\"\nE                       AssertionError: Field 'amount' missing in result\nE                       assert 'amount' in {'car_plate_number': '10G995YY', 'carwash_center': {'address_ru': 'Ташкент, Мирабадский р-н, Северный вокзал, Малая ко...s_store_id': '2090', 'close_time': '23:00:09', ...}, 'created_at': '2025-12-10T09:56:28.314145+05:00', 'id': 1323, ...}\n\ntests/api/carwash/test_payment_history.py:28: AssertionError","steps":[{"name":"GET /payment/history?type=carwash","time":{"start":1771564429981,"stop":1771564430066,"duration":85},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Verify status 200","time":{"start":1771564430067,"stop":1771564430067,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Validate pagination structure","time":{"start":1771564430067,"stop":1771564430067,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"stepsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Validate result items if not empty","time":{"start":1771564430067,"stop":1771564430068,"duration":1},"status":"failed","statusMessage":"AssertionError: Field 'amount' missing in result\nassert 'amount' in {'car_plate_number': '10G995YY', 'carwash_center': {'address_ru': 'Ташкент, Мирабадский р-н, Северный вокзал, Малая ко...s_store_id': '2090', 'close_time': '23:00:09', ...}, 'created_at': '2025-12-10T09:56:28.314145+05:00', 'id': 1323, ...}\n","statusTrace":"  File \"/Users/user/Downloads/abozor-api-tests/tests/api/carwash/test_payment_history.py\", line 28, in test_get_carwash_payment_history\n    assert field in item, f\"Field '{field}' missing in result\"\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":0,"stepsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"epic","value":"Car Wash"},{"name":"feature","value":"Payment History"},{"name":"story","value":"Positive - Get carwash payment history"},{"name":"severity","value":"normal"},{"name":"parentSuite","value":"tests.api.carwash"},{"name":"suite","value":"test_payment_history"},{"name":"subSuite","value":"TestPaymentHistory"},{"name":"host","value":"Mac"},{"name":"thread","value":"4679-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.carwash.test_payment_history"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"cd807afe4eb42b26.json","parameterValues":[]}